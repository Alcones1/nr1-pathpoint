[
  {
    "index": 0,
    "country": "PRODUCTION",
    "touchpoints": [
      {
        "stage_index": 1,
        "value": "WO Count",
        "touchpoint_index": 1,
        "status_on_off": true,
        "relation_steps": [],
        "measure_points": [
          {
            "type": 22,
            "query": "SELECT count(*) as R1, FILTER(count(*), WHERE work_order_status='Completed' or work_order_status='Completed With Warnings' or work_order_status='Completed With Errors') as R2 FROM Log WHERE record_type='WORK_ORDER'",
            "R1": 0,
            "R2": 0
          }
        ]
      },
      {
        "stage_index": 1,
        "value": "Super Rush Volume",
        "touchpoint_index": 2,
        "status_on_off": true,
        "relation_steps": [
          3
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='WORK_ORDER' AND priority='SuperRush'",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 50,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 1,
        "value": "Bulk User Submissions",
        "touchpoint_index": 3,
        "status_on_off": true,
        "relation_steps": [
          4
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='WORK_ORDER' WHERE priority in ('High','Rush','SuperHigh','SuperRush') FACET submitter LIMIT MAX",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 75,
            "type_limit": "OVER",
            "operation_mode": "MULTI"
          }
        ]
      },
      {
        "stage_index": 2,
        "value": "Preservation Job Count",
        "touchpoint_index": 1,
        "status_on_off": true,
        "relation_steps": [],
        "measure_points": [
          {
            "type": 22,
            "query": "SELECT count(*) as R1, FILTER(count(*), WHERE job_state='CompletedSuccessfully' or job_state='CompletedWithFailure') as R2 FROM Log WHERE record_type='CTP' AND (job_type_description='RestoreJob' or job_type_description='ArchiveJob')",
            "R1": 0,
            "R2": 0
          }
        ]
      },
      {
        "stage_index": 2,
        "value": "Super Rush Volume",
        "touchpoint_index": 2,
        "status_on_off": true,
        "relation_steps": [
          3
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='CTP' AND job_type_description in ('RestoreJob','ArchiveJob') and priority='SuperRush'",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 50,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 2,
        "value": "Bulk User Submissions",
        "touchpoint_index": 3,
        "status_on_off": true,
        "relation_steps": [
          4
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='CTP' AND priority in ('High','Rush','SuperHigh','SuperRush') AND job_type_description in ('ArchiveJob','RestoreJob') AND submitter!='NULL' FACET submitter LIMIT MAX",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 75,
            "type_limit": "OVER",
            "operation_mode": "MULTI"
          }
        ]
      },
      {
        "stage_index": 2,
        "value": "Preservation-Restore Queue Backlog",
        "touchpoint_index": 4,
        "status_on_off": true,
        "relation_steps": [
          5
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='TASK' AND task_type_desc='Restore' AND status in ('Queued at Catapult', 'Queued') AND priority='High'",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 500,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 2,
        "value": "Preservation-Restore Low Throughput",
        "touchpoint_index": 5,
        "status_on_off": true,
        "relation_steps": [
          9
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "select count(*) FROM Log WHERE record_type='TASK' AND task_type_desc='Restore' AND status='Completed'",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 100,
            "type_limit": "BELOW",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 2,
        "value": "In Progress Jobs \"Stuck\"",
        "touchpoint_index": 6,
        "status_on_off": true,
        "relation_steps": [
          6,
          7
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='TASK' AND task_type_desc in ('Restore','Archive') AND status='InProgress' AND percentage_complete != 0",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 100,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 2,
        "value": "In Progress  \"Taking Too Long\"",
        "touchpoint_index": 7,
        "status_on_off": true,
        "relation_steps": [
          6,
          7
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='TASK' AND task_type_desc in ('Restore','Archive') AND status='InProgress' AND percentage_complete != 0",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 50,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 2,
        "value": "Failed Jobs by Specific Errors",
        "touchpoint_index": 8,
        "status_on_off": true,
        "relation_steps": [
          13
        ],
        "measure_points": [
          {
            "type": 0,
            "query": "",
            "count": 0
          },
          {
            "type": 1,
            "query": "",
            "error_threshold": 5,
            "error_percentage": 0
          },
          {
            "type": 2,
            "query": "",
            "apdex": 0,
            "apdex_time": 50
          },
          {
            "type": 3,
            "query": "",
            "count": 0
          },
          {
            "type": 4,
            "query": "",
            "sessions": []
          }
        ]
      },
      {
        "stage_index": 3,
        "value": "File Property Count",
        "touchpoint_index": 1,
        "status_on_off": true,
        "relation_steps": [],
        "measure_points": [
          {
            "type": 22,
            "query": "SELECT count(*) as R1, FILTER(count(*), WHERE job_state='CompletedSuccessfully' or job_state='CompletedWithFailure') as R2 FROM Log WHERE record_type='CTP' AND (job_type_description='ChecksumJob' or job_type_description='Md5SumJob')",
            "R1": 0,
            "R2": 0
          }
        ]
      },
      {
        "stage_index": 3,
        "value": "Super Rush Volume",
        "touchpoint_index": 2,
        "status_on_off": true,
        "relation_steps": [
          3
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='CTP' AND job_type_description in ('ChecksumJob','Md5SumJob') and priority='SuperRush'",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 50,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 4,
        "value": "Miscellaneous Count",
        "touchpoint_index": 1,
        "status_on_off": true,
        "relation_steps": [],
        "measure_points": [
          {
            "type": 22,
            "query": "SELECT count(*) as R1, FILTER(count(*), WHERE job_state='CompletedSuccessfully' or job_state='CompletedWithFailure') as R2 FROM Log WHERE record_type='CTP' AND (job_type_description='RenameJob' or job_type_description='DirectoryListingJob' or job_type_description='RetryingDeleteFileJob')",
            "R1": 0,
            "R2": 0
          }
        ]
      },
      {
        "stage_index": 4,
        "value": "Super Rush Volume",
        "touchpoint_index": 2,
        "status_on_off": true,
        "relation_steps": [
          3
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='CTP' AND job_type_description in ('RenameJob','DirectoryListingJob','RetryingDeleteFileJob') and priority='SuperRush'",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 50,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 5,
        "value": "Transformation Job Count",
        "touchpoint_index": 1,
        "status_on_off": true,
        "relation_steps": [],
        "measure_points": [
          {
            "type": 22,
            "query": "SELECT count(*) as R1, FILTER(count(*), WHERE job_state='CompletedSuccessfully' or job_state='CompletedWithFailure') as R2 FROM Log WHERE record_type='CTP' and (job_type_description='TransformJob' or job_type_description='MetadataExtractionJob' or job_type_description='ThumbnailExtractionJob' or job_type_description='TicEncodeJob')",
            "R1": 0,
            "R2": 0
          }
        ]
      },
      {
        "stage_index": 5,
        "value": "Super Rush Volume",
        "touchpoint_index": 2,
        "status_on_off": true,
        "relation_steps": [
          3
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='CTP' AND job_type_description in ('TransformJob','MetadataExtractionJob','ThumbnailExtractionJob','TicEncodeJob') and priority='SuperRush'",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 50,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 5,
        "value": "In Progress Jobs \"Stuck\"",
        "touchpoint_index": 3,
        "status_on_off": true,
        "relation_steps": [
          6
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='TASK' AND task_type_desc in ('Transcode','Tic Encode','Metadata Extraction','Thumbnail Extraction') AND status='InProgress' AND percentage_complete != 0",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 100,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 5,
        "value": "In Progress  \"Taking Too Long\"",
        "touchpoint_index": 4,
        "status_on_off": true,
        "relation_steps": [
          6
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='TASK' AND task_type_desc in ('Transcode','Tic Encode','Metadata Extraction','Thumbnail Extraction') AND status='InProgress' AND percentage_complete != 0",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 50,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 5,
        "value": "Failed Jobs by Specific Errors",
        "touchpoint_index": 5,
        "status_on_off": true,
        "relation_steps": [
          9
        ],
        "measure_points": [
          {
            "type": 0,
            "query": "",
            "count": 0
          },
          {
            "type": 1,
            "query": "",
            "error_threshold": 5,
            "error_percentage": 0
          },
          {
            "type": 2,
            "query": "",
            "apdex": 0,
            "apdex_time": 50
          },
          {
            "type": 3,
            "query": "",
            "count": 0
          },
          {
            "type": 4,
            "query": "",
            "sessions": []
          }
        ]
      },
      {
        "stage_index": 6,
        "value": "Delivery Job Count",
        "touchpoint_index": 1,
        "status_on_off": true,
        "relation_steps": [],
        "measure_points": [
          {
            "type": 22,
            "query": "SELECT count(*) as R1, FILTER(count(*), WHERE job_state='CompletedSuccessfully' or job_state='CompletedWithFailure') as R2 FROM Log WHERE record_type='CTP' and (job_type_description='DeliverJob' or job_type_description='WaitForFileJob' or job_type_description='MediaShuttleJob')",
            "R1": 0,
            "R2": 0
          }
        ]
      },
      {
        "stage_index": 6,
        "value": "Super Rush Volume",
        "touchpoint_index": 2,
        "status_on_off": true,
        "relation_steps": [
          3
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='CTP' AND job_type_description in ('DeliverJob','WaitForFileJob','MediaShuttleJob') and priority='SuperRush'",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 50,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 6,
        "value": "In Progress Jobs \"Stuck\"",
        "touchpoint_index": 3,
        "status_on_off": true,
        "relation_steps": [
          6
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='TASK' AND task_type_desc in ('Deliver','Awaiting Approval','Deliver to Media Shuttle') AND status='InProgress' AND percentage_complete != 0",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 100,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 6,
        "value": "In Progress  \"Taking Too Long\"",
        "touchpoint_index": 4,
        "status_on_off": true,
        "relation_steps": [
          6
        ],
        "measure_points": [
          {
            "type": 21,
            "query": "SELECT count(*) FROM Log WHERE record_type='TASK' AND task_type_desc in ('Deliver','Awaiting Approval','Deliver to Media Shuttle') AND status='InProgress' AND percentage_complete != 0",
            "measure_period": 60,
            "count": 0,
            "multi_value": [],
            "limit_number": 50,
            "type_limit": "OVER",
            "operation_mode": "STANDARD"
          }
        ]
      },
      {
        "stage_index": 6,
        "value": "Failed Jobs by Specific Errors",
        "touchpoint_index": 5,
        "status_on_off": true,
        "relation_steps": [
          9
        ],
        "measure_points": [
          {
            "type": 0,
            "query": "",
            "count": 0
          },
          {
            "type": 1,
            "query": "",
            "error_threshold": 5,
            "error_percentage": 0
          },
          {
            "type": 2,
            "query": "",
            "apdex": 0,
            "apdex_time": 50
          },
          {
            "type": 3,
            "query": "",
            "count": 0
          },
          {
            "type": 4,
            "query": "",
            "sessions": []
          }
        ]
      }
    ]
  }
]
